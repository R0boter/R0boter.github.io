---
layout: post
title: 异或交换
categories: [算法, 编程]
---

# 异或交换

算法排序中经常会用到异或交换，它是一种交换两个变量的方法。

代码如下：

```go

a = a ^ b
b = a ^ b
a = a ^ b

```

以前只知道写法，但从没深究过为何如此，今天重新复习算法时，才好好想了一下

我们知道异或运算的基础性质是:

1. 0 和 N 异或等于 N，N 和 N 异或等于 0。
2. 异或运算满足交换律和结合律。
3. 多个数的异或，运算顺序不影响结果

当一个数和另一个数异或后得到得到的数，和这两个数中任意一个数再次进行 异或运算都可以得到另一个数

我们将这个异或得到的数称为中间数，解析代码运算过程就可以得知：

1. 第一次 a 和 b 异或时，a 被赋值为 a 和 b 异或的中间数，此时 a 为中间数， b 为原本的 b 数
2. 根据上面的规律，原本的 b 数和中间数进行异或运算就可以得到原本的 a 数，而 a 数和中间数进行异或运算就可以得到原本的 b 数
3. 第二次 a 为中间数和 b 数异或时，得到原本的 a 数，并赋值给 b
4. 第三次 a 为中间数和现在的 b 数(原本的 a 数)异或时，得到原本的 b 数，并赋值给 a
5. 此时 a 和 b 数值互换，完成交换，这中间没有创建新的中间变量，节省了空间，而且写法也更优雅

# 个人想法

传统的使用中间变量进行交换，实际参与交换的三个数之间并无关联，是三个独立的数，而异或运算，三个数产生推导关系，巧妙的利用关系节省空间，三个数中任意两个数可以推导出另一个数

根据这种想法，如果参与交换的两个原始数据明确为数字的话，使用任意一种运算都可以实现不需要中间变量即可完成交换

```go

a = a + b
b = a - b
a = a - b

```

只所以采用异或，因为异或是位运算，而所有数据在计算机中实际都是二进制码，使用位运算不会对数据产生破坏，比如要交换的是两个字符，那么是无法使用二元运算的，但使用位运算，改变的是二进制码，并不会影响最终输出
